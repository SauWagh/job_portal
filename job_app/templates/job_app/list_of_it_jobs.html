<!doctype html>
<html lang="en">
<head>
  {% load static %}
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="{% static 'job_app/css/style.css' %}">
  <link rel="stylesheet" href="{% static 'job_app/css/job_list.css' %}">
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"></script>

  <title>Job Listings</title>
</head>
<style>
  .search-input {
  position: relative;
  width: 350px;
  margin-left: 220px;
}

.search-input input {
  width: 227%;
  height: 48px;
  padding: 0 110px 0 15px;
  border: 1px solid #ccc;
  border-radius: 40px;
  font-size: 16px;
  outline: none;
  margin-top: 22%;
  margin-bottom: 13%;

  background: linear-gradient(to right, #efafaf 0%, #dec5c5 40%, #b1c4ff 60%, #4d79ff 100%);
  color: #000000;
}

.search-input button {
  position: absolute;
  position: absolute;
  top: 44%;
  left: 200%; 
  transform: translateY(-50%);
  border: none;
  background: rgba(190, 190, 192, 0.2);
  color: white;
  padding: 0 20px;
  border-radius: 25px;
  cursor: pointer;
  font-size: 16px;
  height: 45px; 
}

.search-input button:hover {
  background-color: rgba(108, 108, 108, 0.6);
  box-shadow: 1px 2px 3px rgb(55, 55, 55);
}
.job-tags {
  display: flex;          
  flex-wrap: wrap;      
  justify-content: center;   
  gap: 8px 10px;        
  margin-top: 10px;
    position: relative;
  right: 19%;
  padding-bottom: 5%;
  width: 261%;
}

.job-tags .badge {
  background: linear-gradient(to right, #efafaf 0%, #dec5c5 40%, #b1c4ff 60%, #4d79ff 100%);
  color: #000000;       
  padding: 6px 12px;   
  border-radius: 20px;       
  font-size: 14px;
  cursor: pointer;
  transition: all 0.3s ease;

}

.job-tags .badge:hover {
  background: linear-gradient(to right, #ffa5a5 0%, #faaeae 40%, #728ad3 60%, #3264fc 100%);
  color: #000;
  transform: scale(1.05);    /* Slight pop effect */
}
.tag-dropdown {
  position: relative;
  display: inline-block;
}

.tag-dropdown .dropdown-options {
  display: none;
  position: absolute;
  top: 120%;  /* slightly below the main tag */
  left: 0;
  background-color: #111;
  padding: 8px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.5);
  min-width: 120px;
  flex-direction: column;
  gap: 5px;
  z-index: 10;
}

.tag-dropdown:hover .dropdown-options {
  display: flex;
  flex-direction: column;
}

/* Gradient styling for badges (main tag and options) */
.job-tags .badge,
.tag-dropdown .option {
  background: linear-gradient(to right, #efafaf 0%, #dec5c5 40%, #b1c4ff 60%, #4d79ff 100%);
  color: #000;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.job-tags .badge:hover,
.tag-dropdown .option:hover {
  background: linear-gradient(to right, #ffa5a5 0%, #faaeae 40%, #728ad3 60%, #3264fc 100%);
  transform: scale(1.05);
}
/* Mobile Responsive Adjustments */
@media (max-width: 768px) {
  body {
    padding: 5% !important;
  }

  h1 {
    font-size: 36px !important;
    margin-top: 80px !important;
    text-align: center !important;
  }

  .search-input {
    width: 90% !important;
    margin-left: 0 !important;
  }

  .search-input input {
    width: 111% !important;
    padding: 0 60px 0 15px !important;
    margin-top: 201px !important;
    margin-bottom: 15px !important;
  }

  .search-input button {
    top: 50% !important;
    left: 85% !important;
    transform: translateY(-50%) !important;
    padding: 0 10px !important;
    height: 30px !important;
    font-size: 14px !important;
  }

  .job-tags {
    width: 100% !important;
    right: 0 !important;
    justify-content: flex-start !important;
    flex-wrap: wrap !important;
    padding-bottom: 10px !important;
  }

  .job-tags .tag-dropdown {
    margin-bottom: 8px;
  }

  .col-md-4.job-list, .col-md-8 {
    width: 100% !important;
    display: block !important;
  }

  .job-list {
    margin-bottom: 20px;
  }

  .side-panel {
    width: 250px !important;
  }
  .find{
    padding-top: 82px;
    font-size: 21px!important;
  }
  body h1{
    font-size: 50px;
  }
.job-card.active + .job-details {
    display: block;
}
.job-details {
    display: none;
}
}


</style>
<body style="padding-top: 10%; padding: 10%;">
      <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: rgba(18, 18, 18, 0.7);">
      <a class="navbar-brand" href="#">JobPortal</a>

      <!-- Mobile Toggle -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Navbar Content -->
      <div class="collapse navbar-collapse" id="navbarContent">
        <!-- Left Links -->
        <ul class="navbar-nav mr-auto">
          <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="/list/"style="text-decoration: underline; text-underline-offset: 20px; color: white;">Jobs</a></li>
          <li class="nav-item"><a class="nav-link" href="/about/">About</a></li>
          <li class="nav-item"><a class="nav-link" href="/contact/">Contact</a></li>
          <li class="nav-item"><a class="nav-link" href="/emp_pj/">Employers/Post Job</a></li>
        </ul>

        <!-- Right Buttons -->
        <div class="form-inline my-2 my-lg-0">
          <!-- <a href="/login/" class="btn btn-outline-light mr-2">User Login</a> -->
          <a href="/register/" class="btn btn-light">Register</a>
          {% if user.is_authenticated %}
              <div class="profile-icon">
                  <a href="{% url 'dashboard' %}">
                      {% if profile and profile.profile_picture %}
                          <img src="{{ profile.profile_picture.url }}" 
                               alt="Profile Picture"
                               class="rounded-circle"
                               style="width:50px; height:50px; object-fit: cover; border: 2px solid #fff;">
                      {% else %}
                          
                          <img src="{% static 'job_app/images/user.png' %}" 
                               alt="Profile"
                               style="width:40px; height:40px; border-radius:50%; background:white; padding:5px;">
                      {% endif %}
                  </a>
              </div>
          {% else %}
              <button type="button" class="btn btn-outline-light" data-toggle="modal" data-target="#loginModal">
                  Login
              </button>
          {% endif %}
        </div>
      </div>
    </nav>

  <input type="checkbox" id="toggle-panel">
  <label for="toggle-panel" class="open-btn"><img src="{% static 'job_app/images/menu.png' %}" alt="" style="width: 50px;"></label>
  <div class="overlay"></div>


  <div class="side-panel">
    <div class="close-btn">
      <label for="toggle-panel">‚úñ</label>
    </div>

<form action="" method="GET">
  <details open>
    <summary><h4>Filter by Branch</h4></summary>
    <ul style="list-style:none; padding-left:10px;" class="filter">
      <li><label><input type="checkbox" name="branch" value="IT / Software"
        {% if 'IT / Software' in selected_branches %}checked{% endif %}> IT / Software</label></li>
      <li><label><input type="checkbox" name="branch" value="Electronics / Electrical"
        {% if 'Electronics / Electrical' in selected_branches %}checked{% endif %}> Electronics / Electrical</label></li>
      <li><label><input type="checkbox" name="branch" value="Civil"
        {% if 'Civil' in selected_branches %}checked{% endif %}> Civil</label></li>
      <li><label><input type="checkbox" name="branch" value="Mechanical"
        {% if 'Mechanical' in selected_branches %}checked{% endif %}> Mechanical</label></li>
      <li><label><input type="checkbox" name="branch" value="Finance / Banking"
        {% if 'Finance / Banking' in selected_branches %}checked{% endif %}> Finance / Banking</label></li>
      <li><label><input type="checkbox" name="branch" value="Graphic / UX / UI Design"
        {% if 'Graphic / UX / UI Design' in selected_branches %}checked{% endif %}> Graphic / UX / UI Design</label></li>
      <li><label><input type="checkbox" name="branch" value="Biotechnology"
        {% if 'Biotechnology' in selected_branches %}checked{% endif %}> Biotechnology</label></li>
      <li><label><input type="checkbox" name="branch" value="Manufacturing"
        {% if 'Manufacturing' in selected_branches %}checked{% endif %}> Manufacturing</label></li>
      <li><label><input type="checkbox" name="branch" value="Education / Teaching"
        {% if 'Education / Teaching' in selected_branches %}checked{% endif %}> Education / Teaching</label></li>
      <li><label><input type="checkbox" name="branch" value="Other"
        {% if 'Other' in selected_branches %}checked{% endif %}> Other</label></li>
    </ul>
  </details>

  {% if related_skills %}
  <details open>
    <summary><h4>Filter by Skill</h4></summary>
    <ul style="list-style:none; padding-left:10px;">
      {% for skill in related_skills %}
        <li><label><input type="checkbox" name="skill" value="{{ skill }}"> {{ skill }}</label></li>
      {% endfor %}
    </ul>
  </details>
  {% endif %}

  <button type="submit">Apply</button>
</form>


    <details>
    <summary><h>Date Posted</h5></summary>
    <ul style="list-style:none; padding-left:10px;" class="filter">
      <li><label><input type="checkbox"> Today</label></li>
      <li><label><input type="checkbox"> 3 Days</label></li>
      <li><label><input type="checkbox"> 7 Days</label></li>
      <li><label><input type="checkbox"> 10 Days</label></li>
      <li><label><input type="checkbox"> Any Days</label></li>
    </ul>
  </details>

  <details>
    <summary><h>Salary</h5></summary>
    <ul style="list-style:none; padding-left:10px;" class="filter">
      <li><label><input type="checkbox"> from 2,00,000</label></li>
      <li><label><input type="checkbox"> from 3,00,000</label></li>
      <li><label><input type="checkbox"> from 4,00,000</label></li>
      <li><label><input type="checkbox"> from 5,00,000</label></li>
      <li><label><input type="checkbox"> from 7,00,000</label></li>
      <li><label><input type="checkbox"> from 10,00,000</label></li>
      <li><label><input type="checkbox"> Any</label></li>
    </ul>
  </details>

    <details>
    <summary><h>Work Experience</h5></summary>
    <ul style="list-style:none; padding-left:10px;" class="filter">
      <li><label><input type="checkbox"> 1 - 2 year</label></li>
      <li><label><input type="checkbox"> 2 - 4 year</label></li>
      <li><label><input type="checkbox"> 4 - 6 year</label></li>
      <li><label><input type="checkbox"> Any</label></li>
    </ul>
  </details>

  <details>
    <summary><h>Job Type</h5></summary>
    <ul style="list-style:none; padding-left:10px;" class="filter">
      <li><label><input type="checkbox"> Full Time</label></li>
      <li><label><input type="checkbox"> Part Time</label></li>
      <li><label><input type="checkbox"> Hybrid</label></li>
      <li><label><input type="checkbox"> Remote</label></li>
      <li><label><input type="checkbox"> Work in office</label></li>
      <li><label><input type="checkbox"> Any</label></li>
      <li><label><input type="checkbox"> </label></li>
    </ul>
  </details>

  <details>
    <summary><h>Location</h5></summary>
    <ul style="list-style:none; padding-left:10px;" class="filter">
      <li><label><input type="checkbox"> Nagpur</label></li>
      <li><label><input type="checkbox"> Delhi</label></li>
      <li><label><input type="checkbox"> Pune</label></li>
      <li><label><input type="checkbox"> Hyderabad</label></li>
      <li><label><input type="checkbox"> Kochi</label></li>
      <li><label><input type="checkbox"> Banglor</label></li>
      <li><label><input type="checkbox"> Any</label></li>
    </ul>
  </details>

  </div>
  
<h1 style="position: absolute; top: 0; font-weight: 800; font-size: 60px; text-align: center; margin-top: 115px;" class="find">Find your ideal job here</h1>

<div class="container-fluid">
  <div class="row">
    <!-- Search bar -->
     <form action="" method="GET">
    <div class="search-input mb-3">
      <input type="text" name="q" placeholder="Search Jobs..." value="{{ request.GET.q }}">
      <button>Search</button>
<div class="job-tags">

  <!-- 1. City -->
  <div class="tag-dropdown">
    <span class="badge main-tag">City</span>
    <div class="dropdown-options">
      <span class="badge option">Nagpur</span>
      <span class="badge option">Pune</span>
      <span class="badge option">Mumbai</span>
      <span class="badge option">Bangalore</span>
    </div>
  </div>

  <!-- 2. Job Type -->
  <div class="tag-dropdown">
    <span class="badge main-tag">Job Type</span>
    <div class="dropdown-options">
      <span class="badge option">Full-Time</span>
      <span class="badge option">Part-Time</span>
      <span class="badge option">Internship</span>
      <span class="badge option">Freelance</span>
    </div>
  </div>

  <!-- 3. Skills -->
  <div class="tag-dropdown">
    <span class="badge main-tag">Skills</span>
    <div class="dropdown-options">
      <span class="badge option">Python</span>
      <span class="badge option">Django</span>
      <span class="badge option">React</span>
      <span class="badge option">Node.js</span>
    </div>
  </div>

  <!-- 4. Experience -->
  <div class="tag-dropdown">
    <span class="badge main-tag">Experience</span>
    <div class="dropdown-options">
      <span class="badge option">Fresher</span>
      <span class="badge option">1-3 Years</span>
      <span class="badge option">3-5 Years</span>
      <span class="badge option">5+ Years</span>
    </div>
  </div>

  <!-- 5. Industry -->
  <div class="tag-dropdown">
    <span class="badge main-tag">Industry</span>
    <div class="dropdown-options">
      <span class="badge option">IT</span>
      <span class="badge option">Marketing</span>
      <span class="badge option">Finance</span>
      <span class="badge option">Healthcare</span>
    </div>
  </div>

  <!-- 6. Remote/Hybrid -->
  <div class="tag-dropdown">
    <span class="badge main-tag">Work Mode</span>
    <div class="dropdown-options">
      <span class="badge option">Remote</span>
      <span class="badge option">Hybrid</span>
      <span class="badge option">On-Site</span>
    </div>
  </div>

  <!-- 7. Company -->
  <div class="tag-dropdown">
    <span class="badge main-tag">Company</span>
    <div class="dropdown-options">
      <span class="badge option">TCS</span>
      <span class="badge option">Infosys</span>
      <span class="badge option">Google</span>
      <span class="badge option">Amazon</span>
    </div>
  </div>

  <!-- 8. Education -->
  <div class="tag-dropdown">
    <span class="badge main-tag">Education</span>
    <div class="dropdown-options">
      <span class="badge option">B.Tech</span>
      <span class="badge option">M.Tech</span>
      <span class="badge option">MBA</span>
      <span class="badge option">B.Sc</span>
    </div>
  </div>

  <!-- 9. Salary -->
  <div class="tag-dropdown">
    <span class="badge main-tag">Salary</span>
    <div class="dropdown-options">
      <span class="badge option"><5 LPA</span>
      <span class="badge option">5-10 LPA</span>
      <span class="badge option">10-20 LPA</span>
      <span class="badge option">20+ LPA</span>
    </div>
  </div>

  <!-- 10. Job Category -->
  <div class="tag-dropdown">
    <span class="badge main-tag">Category</span>
    <div class="dropdown-options">
      <span class="badge option">Software</span>
      <span class="badge option">Design</span>
      <span class="badge option">Marketing</span>
      <span class="badge option">Sales</span>
    </div>
  </div>

</div>

    </form>
</div>    


<div class="row" style="    position: relative;
    right: 0%;
    bottom: 0">
  <!-- Left side -->
  <div class="col-md-4 job-list" style="width: 1200px;">
    {% for job in jobs %}
      <a href="#job{{ forloop.counter }}" class="job-card d-block" data-job-id="{{ forloop.counter }}" style="color: white; text-decoration: none;">
        <h5>{{ job.job_title }}</h5>
        <p><strong>üè¢:{{ job.company_name }}</strong></p>
        <p>üó∫Ô∏è:{{ job.job_location }}</p>
        <p>üí∏Salary: {{ job.salary }}</p>
      </a>
    {% endfor %}
  </div>

  <!-- Right side -->
  <div class="col-md-8">
    {% for job in jobs %}
      <div id="job{{ forloop.counter }}" class="job-details">
        <h3>{{ job.job_title }}</h3>
        <p><strong>üè¢Company:</strong> {{ job.company_name }}</p>
        <p><strong>üó∫Ô∏èLocation:</strong> {{ job.job_location }}</p>
        <p><strong>üí∏Salary:</strong> {{ job.salary }}</p>
        <hr>

        {% if job.can_des %}
          <p><strong>üë®üèª‚ÄçüíªExperience:</strong> {{ job.can_des.min_experience }} - {{ job.can_des.max_experience }}</p>
          <p><strong>üë®üèª‚ÄçüéìEducation:</strong> {{ job.can_des.education_required }}</p>
          <p><strong>üõ†Ô∏èSkills:</strong> {{ job.can_des.skills_required }}</p>
        {% endif %}

        {% if job.job_des %}
          <p><strong>üìùJob Description:</strong> {{ job.job_des.job_description }}</p>
          <p><strong>üõëRequirement:</strong> {{ job.job_des.ideal_candidate_profile }}</p>
          <p><strong>‚è≥Applying Deadline:</strong> {{ job.job_des.application_deadline }}</p>
        {% endif %}

        {% if job.comm %}
          <p><strong>üì©Contact Email:</strong> {{ job.comm.contact_email }}</p>
          <p><strong>üìûContact Number:</strong> {{ job.comm.contact_number }}</p>
        {% endif %}

        <a href="{% url 'edit_before_applying_job' job.id %}" class="btn btn-sm btn-primary" type="button">Apply</a>
      </div>
    {% endfor %}
  </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const jobCards = document.querySelectorAll('.job-card');

    // Make the first job card active on page load
    if (jobCards.length > 0) {
        const firstCard = jobCards[0];
        firstCard.classList.add('active');

        // Scroll the corresponding job details into view properly
        const jobId = firstCard.getAttribute('href').substring(1);
        const detail = document.getElementById(jobId);
        if (detail) {
            setTimeout(() => {
                detail.scrollIntoView({ behavior: 'smooth', block: 'start', inline: 'start' });
                // Extra force to align horizontally if needed
                if (detail.parentElement) {
                    detail.parentElement.scrollLeft = 0;
                }
            }, 100);
        }
    }

    // Click event for all job cards
    jobCards.forEach(card => {
        card.addEventListener('click', function(e) {
            jobCards.forEach(c => c.classList.remove('active'));
            card.classList.add('active');
            const jobId = card.getAttribute('href').substring(1);
            const detail = document.getElementById(jobId);
            if (detail) {
                detail.scrollIntoView({ behavior: 'smooth', block: 'start', inline: 'start' });
                if (detail.parentElement) {
                    detail.parentElement.scrollLeft = 0;
                }
            }
        });
    });
});

</script>

</body>
</html>
