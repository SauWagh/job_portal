<!DOCTYPE html>
<html>
<head>
  {% load static %}
    <title>SimpleBot</title>
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">
    <style>
        body { font-family: Arial; background: #111; color: white; }
        #chatbox { width: 400px; margin: 50px auto; background: #222; padding: 20px; border-radius: 10px; }
        #messages { height: 300px; overflow-y: auto; }
        .user { color: cyan; }
        .bot { color: lime; }
    </style>
</head>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: rgba(18, 18, 18, 0.7);">
      <a class="navbar-brand" href="#">JobPortal</a>

      <!-- Mobile Toggle -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Navbar Content -->
      <div class="collapse navbar-collapse" id="navbarContent">
        <!-- Left Links -->
        <ul class="navbar-nav mr-auto">
          <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="/list/">Jobs</a></li>
          <li class="nav-item"><a class="nav-link" href="/about/" style="text-decoration: underline; text-underline-offset: 10px; color: white;">About</a></li>
          <li class="nav-item"><a class="nav-link" href="/contact/">Contact</a></li>
          <li class="nav-item"><a class="nav-link" href="/emp_pj/">Employers/Post Job</a></li>
        </ul>

        <!-- Right Buttons -->
        <div class="form-inline my-2 my-lg-0">
          <!-- <a href="/login/" class="btn btn-outline-light mr-2">User Login</a> -->
          <a href="/register/" class="btn btn-light">Register</a>
          {% if user.is_authenticated %}
              <div class="profile-icon">
                  <a href="{% url 'dashboard' %}">
                      {% if profile and profile.profile_picture %}
                          <img src="{{ profile.profile_picture.url }}" 
                               alt="Profile Picture"
                               class="rounded-circle"
                               style="width:50px; height:50px; object-fit: cover; border: 2px solid #fff;">
                      {% else %}
                          
                          <img src="{% static 'images/user.png' %}" 
                               alt="Profile"
                               style="width:40px; height:40px; border-radius:50%; background:white; padding:5px;">
                      {% endif %}
                  </a>
              </div>
          {% else %}
              <button type="button" class="btn btn-outline-light" data-toggle="modal" data-target="#loginModal">
                  Login
              </button>
          {% endif %}

        </div>
      </div>
    </nav>
<body>
    <div id="chatbox">
        <h2>SimpleBot ðŸ¤–</h2>
        <div id="messages"></div>
        <input type="text" id="user_input" placeholder="Type a message..." />
        <button onclick="sendMessage()">Send</button>
    </div>

    <script>
        function sendMessage() {
            let userInput = document.getElementById("user_input").value;
            let messagesDiv = document.getElementById("messages");

            messagesDiv.innerHTML += "<p class='user'><b>You:</b> " + userInput + "</p>";

            fetch(`/get-response/?message=${userInput}`)
                .then(response => response.json())
                .then(data => {
                    messagesDiv.innerHTML += "<p class='bot'><b>Bot:</b> " + data.response + "</p>";
                    messagesDiv.scrollTop = messagesDiv.scrollHeight;
                });

            document.getElementById("user_input").value = "";
        }
    </script>
</body>
</html>
