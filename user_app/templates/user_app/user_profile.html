<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ profile.full_name|default:"User" }} - Profile</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'job_app/css/style.css' %}">

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"></script>

</head>

<style>
.edit-wrapper {
    position: relative;
    display: inline-block;
    left: -12px;
    bottom: 3px;
}

.edit-tooltip {
    visibility: hidden;
    font-size: 10px;
    width: 100px;
    background-color: rgba(0,0,0,0.8);
    color: #fff;
    text-align: center;
    padding: 5px 10px;
    border-radius: 6px;

    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    transition: opacity 0.3s;
}

.edit-btn:hover .edit-tooltip {
    visibility: visible;
    opacity: 1;
}

.edit-icon {
    width: 30px;
    height: 30px;
    transition: transform 0.2s ease;
}

.edit-btn:hover .edit-icon {
    transform: scale(1.2);
}
@media(max-width:768px){
    .profile-pic{
    position: absolute !important;
    left: 81% !important;
    top: 0% !important;
    border: 3px solid black p !important;
    width: 105px !important;
    height: 105px !important;
    }
}
</style>
<body class="bg-light" style="color: rgb(0, 0, 0);">

        <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: rgba(18, 18, 18, 0.7);">
      <a class="navbar-brand" href="#">JobPortal</a>

      <!-- Mobile Toggle -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Navbar Content -->
      <div class="collapse navbar-collapse" id="navbarContent">
        <!-- Left Links -->
        <ul class="navbar-nav mr-auto">
          <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="/list/">Jobs</a></li>
          <li class="nav-item"><a class="nav-link" href="/about/">About</a></li>
          <li class="nav-item"><a class="nav-link" href="/contact/">Contact</a></li>
          <li class="nav-item"><a class="nav-link" href="/emp_pj/">Employers/Post Job</a></li>
        </ul>

        <!-- Right Buttons -->
        <div class="form-inline my-2 my-lg-0">
          <!-- <a href="/login/" class="btn btn-outline-light mr-2">User Login</a> -->
          <a href="/register/" class="btn btn-light" st>Register</a>
          {% if user.is_authenticated %}
              <div class="profile-icon">
                  <a href="{% url 'dashboard' %}">
                      {% if profile and profile.profile_picture %}
                          <img src="{{ profile.profile_picture.url }}" 
                               alt="Profile Picture"
                               class="rounded-circle"
                               style="width:50px; height:50px; object-fit: cover; border: 2px solid #fff;">
                      {% else %}
                          
                          <img src="{% static 'job_app/images/user.png' %}" 
                               alt="Profile"
                               style="width:40px; height:40px; border-radius:50%; background:white; padding:5px;">
                      {% endif %}
                  </a>
              </div>
          {% else %}
              <button type="button" class="btn btn-outline-light" data-toggle="modal" data-target="#loginModal">
                  Login
              </button>
          {% endif %}

        </div>
      </div>
    </nav>

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8">

            <!-- Profile Card -->
            <div class="card shadow-lg border-0 rounded-3">
                <div class="card-body text-center p-4" style="text-align: left !important;">

                    <!-- Profile Picture -->
                    {% if profile.profile_picture %}
                        <img src="{{ profile.profile_picture.url }}?{{ profile.profile_picture.updated_at.timestamp }}" alt="Profile Picture"
                             class="rounded-circle mb-3 profile-pic" width="150" height="150" style="position: absolute; left: 75%; top: 2%; border: 3px solid black;">
                    {% else %}
                        <img src="{% static 'job_app/images/profile-picture.png' %}" alt="Default Avatar"
                             class="rounded-circle mb-3 profile-pic" width="150" height="150" style="position: absolute; left: 75%; top: 2%; border: 3px solid black;">
                    {% endif %}

                    <h2 class="fw-bold">{{ profile.full_name|default:"No Name" }} &nbsp;
                        <div class="edit-wrapper">
                    <a href="{% url 'edit_profile' %}" class="edit-pr edit-btn"><img src="{% static 'images/edit-info.png' %}" alt="" style="width: 30px; height: 30px;" class="edit-icon">
                        <span class="edit-tooltip">Edit your profile</span>
                    </a>
                    </div>
                    </h2>

                    <p class="text-muted mb-4">{{ profile.current_position|default:"No Position" }}</p>

            
                    <h5 class="text-start mt-4">Personal Information</h5>
                    <hr>
                    <p><strong>üìßEmail:</strong> {{ request.user.email }}</p>
                    <p><strong>üìûPhone:</strong> {{ profile.phone_number|default:"Not provided" }}</p>

                    {% if profile.gender == "Male" %}
                        <p><strong>‚ôÇÔ∏èGender: </strong> {{ profile.gender }}</p>
                    {% elif profile.gender == "Female" %}
                        <p><strong>‚ôÄÔ∏èGender: </strong> {{ profile.gender }}</p>
                    {% else %}
                        <p><strong>‚ößGender: </strong> {{ profile.gender }}</p>
                    {% endif %}

                    <p><strong>üéÇDate of Birth: </strong> {{ profile.date_of_birth|date:"Y-m-d"|default:"Not provided" }}</p>

                    <h5 class="text-start mt-4">Professional Information</h5>
                    <hr>
                    <p><strong>üéìHighest Education: </strong> {{ profile.highest_education|default:"Not provided" }}</p>

                    <p><strong>üõ†Ô∏èSkills: </strong> {{ profile.skills|default:"Not provided" }}</p>

                    <p><strong>üìäExperience: </strong> {{ profile.experience_years }} years</p>
                    <p><strong>üìçPreferred Job Location: </strong> {{ profile.preferred_job_location|default:"Not provided" }}</p>

                    <h5 class="text-start mt-4">Documents & Links</h5>
                    <hr>
                    <p><strong>üìÑResume: </strong>
                        {% if profile.resume_upload %}
                            <a href="{{ profile.resume_upload.url }}" target="_blank" class="btn btn-outline-dark btn-sm">Download</a>
                        {% else %}
                            Not uploaded
                        {% endif %}
                    </p>

                    <p><strong>üßë‚ÄçüíºLinkedIn: </strong>
                        {% if profile.linkedin_profile %}
                            <a href="{{ profile.linkedin_profile }}" target="_blank">{{ profile.linkedin_profile }}</a>
                        {% else %}
                            Not provided
                        {% endif %}
                    </p>

                    <p><strong>üåêPortfolio: </strong>
                        {% if profile.portfolio_link %}
                            <a href="{{ profile.portfolio_link }}" target="_blank">{{ profile.portfolio_link }}</a>
                        {% else %}
                            Not provided
                        {% endif %}
                    </p>

                    <p><strong>üíªProject: </strong>
                        {% if profile.project_link %}
                            <a href="{{ profile.project_link }}" target="_blank">{{ profile.project_link }}</a>
                        {% else %}
                            Not provided
                        {% endif %}
                    </p>

                </div>
            </div>

        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
